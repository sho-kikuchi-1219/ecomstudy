<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jQuery</title>
    <link rel = styleseet href = "workjq.css" >
    <style type = "text/css">
    body{
        display: flex;
        flex-wrap: wrap;
    }
    .cell{
        width: 50px;
        height: 50px;
        background-color: skyblue;
        margin: 5px;
        text-align: center;
        line-height: 50px;
    }
    .hit{
        background-color: pink;
    }
    .keep{
      background-color: pink; 
    }
    table.base{
        counter-reset: number;
    }
    table.base th　td{
        counter-increment: number;
        content: counter(number);
    }
    .box{
        width: 220px;
        margin:0 auto;
        padding: 5px;
        border:solid 1px #000000;
        background-color: rgb(212, 199, 199);
    }
    #allbutton{
        text-align: center;
    }
    #allbutton input{
        font-size: 60px;
    }
    </style>
</head>
<body>
    <div class="box">
        <table id="base" border="1">
        </table>
        <div id="allbutton" >
            <input type="button" value="スタート" id="start">
            <input type="button" value="ストップ" id="stop">
            <input type="button" value="リセット" id="reset">
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        let count = 0
        for(let i = 1; i <= 4; i++){
            const tr = $('<tr>');
            for(let j = 1; j <= 4; j++){
                count++
                tr.append($('<td>').text(count).attr('id',count).addClass('cell'));
                    /*
                const tmp = kikuchi.append($('<td>').text(count));
                tmp.attr('id',count);
                tmp.addClass('cell');
                
                tr.append($('<td>').attr('id', count))
                $(`#${count}`).text(count)
                $('#' + count).addClass('cell')
                */
            };
            $('#base').append(tr);
        }

    //let allIDnumber = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]
    //let allIDnumber = [16,15,14,13,12,11,10,9,7,6,5,4,2,1,8,3]
    let allIDnumber = []
    for (let i = 16; i > 0; i--) {
        allIDnumber.push(i)
    }
    let selector = -1 
    let deleteIndexnumber = -1
    let startbutton = false  

    const roll = () => {
        let remclass = $('#' + selector);
        if (remclass) {
            remclass.removeClass('hit');
        }
        //let randomIDnumber = Math.floor(Math.random()*(allIDnumber.length-1 +1));
        let randomNumberForIndex = Math.floor(Math.random()*(allIDnumber.length -1));
        //[1,2,3,4,5,7,9,11,12,14,15]
        //hitnumber = $('#' + randomNumberForIndex);
        hitnumber = allIDnumber[randomNumberForIndex];
        number = $('#'+ hitnumber)
        number.addClass('hit');
        selector = hitnumber;
        deleteIndexnumber = randomNumberForIndex
    }

      $('#start').click(function(){
        if (startbutton === false){
        rollstart = setInterval(roll,100)
        }
        startbutton = true
      });

      $('#stop').click(function(){
        if (startbutton === true){
            clearInterval(rollstart);
            allIDnumber.splice(deleteIndexnumber,1);
            $('#'+selector).addClass('keep');
        }
        startbutton = false
        console.log(allIDnumber);
    });

    $('#reset').click(function(){
       clearInterval(rollstart) ;
       startbutton = false
        $('.keep').removeClass('keep');
        $('.hit').removeClass('hit');
        allIDnumber = []
        for (let i = 16; i > 0; i--) {
        allIDnumber.push(i)
    }
    });
    </script>
</body>
    <script type = "text/javascript" src = "workjq.js"></script>
</html>